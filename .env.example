# ==============================================================================
# HOMELAB DOCKER STACK - ENVIRONMENT CONFIGURATION
# ==============================================================================
# Copy this file to .env and modify according to your needs
# SECURITY WARNING: Change all default passwords before production use!
# ==============================================================================

# ==============================================================================
# BASIC CONFIGURATION
# ==============================================================================

COMPOSE_PROJECT_NAME=homelab

# ========================
# ACCESS MODE CONFIGURATION
# ========================

# Choose ONE access mode: domain or localhost
# Option A: Domain Mode (Recommended for Production)
# HOMELAB_DOMAIN=example.com
# ACCESS_MODE=domain

# Option B: Localhost Mode (Recommended for Testing)
HOMELAB_DOMAIN=lab
ACCESS_MODE=localhost

# ========================
# SERVER CONFIGURATION
# ========================

HOMELAB_SERVER_IP=192.168.100.151
TZ=Africa/Nairobi
PUID=1000
PGID=1000
DOCKER_DATA_DIR=C:/Homelab

# ========================
# DOCKER CONFIGURATION
# ========================

DOCKER_NETWORK=homelab_internal
DOCKER_DATA_PATH=/c/Homelab

# ==============================================================================
# TRAEFIK CONFIGURATION
# ==============================================================================

TRAEFIK_EMAIL=contact@example.com
ENABLE_TRAEFIK=true
TRAEFIK_DASHBOARD_PORT=7080

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================

# PostgreSQL
POSTGRES_DB=homelab
POSTGRES_USER=homelab_user
POSTGRES_PASSWORD=changeme123_postgres
POSTGRES_PORT=5433

# Redis
REDIS_PASSWORD=changeme123_redis
REDIS_PORT=6380

# TimescaleDB Configuration
TIMESCALEDB_DB=iot_data
TIMESCALEDB_USER=timescale
TIMESCALEDB_PASSWORD=changeme123_timescale

# InfluxDB Configuration
INFLUXDB_USER=admin
INFLUXDB_PASSWORD=changeme123_influx
INFLUXDB_ORG=homelab
INFLUXDB_BUCKET=metrics
INFLUXDB_TOKEN=changeme123_token

# ==============================================================================
# SERVICE AUTHENTICATION
# ==============================================================================

# n8n
N8N_USER=admin
N8N_PASSWORD=changeme123_n8n

# Pi-hole
PIHOLE_PASSWORD=changeme123_pihole

# SearXNG
SEARXNG_SECRET=changeme123_searxng

# Jellyfin (set on first run)
JELLYFIN_PASSWORD=changeme123_jellyfin

# Navidrome (set on first run)
NAVIDROME_PASSWORD=changeme123_navidrome

# Home Assistant (set on first run)
HOMEASSISTANT_PASSWORD=changeme123_homeassistant

# Grafana Configuration
GRAFANA_USER=admin
GRAFANA_PASSWORD=changeme123_grafana

# Code Server Configuration
CODE_SERVER_PASSWORD=changeme123_code

# Jupyter Configuration
JUPYTER_TOKEN=changeme123_jupyter

# Outline Configuration
OUTLINE_SECRET_KEY=5a3f8c1e9b2d7f4a6c9e0b3d8a1f5c7e2a4d6b8c0e9f3a7b5d8c1e4f6a9b2c7
OUTLINE_UTILS_SECRET=8c1e9b2d7f4a6c9e0b3d8a1f5c7e2a4d6b8c0e9f3a7b5d8c1e4f6a9b2c7e

# ==============================================================================
# VPN CONFIGURATION (WG-Easy)
# ==============================================================================

WG_UI_PASSWORD=Admin@123.
WG_UI_PASSWORD_HASH=$$2a$$10$$X5w7s8t9u0v1w2x3y4z5AeBcDeFgHiJkLmNoPqRsTuVwXyZ0123456789abcdefgh
WG_PORT=51820
WG_UI_PORT=7518
WG_DEFAULT_ADDRESS=10.8.0.x
WG_DEFAULT_DNS=1.1.1.1
WG_MTU=1420
WG_ALLOWED_IPS=0.0.0.0/0

# ==============================================================================
# MEDIA SERVICES CONFIGURATION
# ==============================================================================

# Music Services
LIDARR_DOWNLOAD_QUALITY=MP3-320
NAVIDROME_SCANNING_INTERVAL=1h
NAVIDROME_TRANSCODING_CACHE_SIZE=500MB
NAVIDROME_PORT=7453

# Media Download Quality
RADARR_QUALITY_PROFILE=HD-1080p
SONARR_QUALITY_PROFILE=HD-1080p

# Media Server Ports
JELLYFIN_PORT=7096

# ==============================================================================
# KARAKEEP CONFIGURATION
# ==============================================================================

KARAKEEP_VERSION=release
KARAKEEP_PORT=7301
MEILI_NO_ANALYTICS=true
MEILI_MASTER_KEY=changeme123_meili

# ==============================================================================
# PATHS AND DIRECTORIES
# ==============================================================================

MEDIA_PATH=/c/Homelab/media
CONFIG_PATH=/c/Homelab/services
BACKUP_PATH=/c/Homelab/backups

# ==============================================================================
# NETWORK CONFIGURATION
# ==============================================================================

LOCAL_NETWORK=192.168.100.0/24
VPN_SUBNET=10.8.0.0/24

# Pi-hole DNS Configuration
DNS_PRIMARY=1.1.1.1
DNS_SECONDARY=1.0.0.1
PIHOLE_UPSTREAM_DNS=1.1.1.1,1.0.0.1,8.8.8.8,9.9.9.9

# ==============================================================================
# SERVICE PORTS - CONFLICT FREE
# ==============================================================================

# Core Services
HEIMDALL_PORT=7081
SEARXNG_PORT=7082

# Monitoring
UPTIME_KUMA_PORT=7001
GRAFANA_PORT=7300

# Automation & Workflow
N8N_PORT=7067

# File Services
FILEBROWSER_PORT=7805
OUTLINE_PORT=7305

# Development
CODE_SERVER_PORT=7808
JUPYTER_PORT=7888
MLFLOW_PORT=7500
OPENCV_PORT=7501

# IoT & Automation
NODERED_PORT=7180
ESPHOME_PORT=7605
ZIGBEE2MQTT_PORT=7800
MQTT_EXPLORER_PORT=7400
ROSBRIDGE_PORT=7909

# Network Ports (unchanged)
MOSQUITTO_PORT=1883
MOSQUITTO_WS_PORT=9001
ROS_PORT=11311

# ==============================================================================
# DNS FALLBACK CONFIGURATION
# ==============================================================================

# Primary DNS (Your Pi-hole)
DNS_PRIMARY_SERVER=192.168.100.151

# Fallback DNS Servers
DNS_SECONDARY=1.1.1.1
DNS_TERTIARY=8.8.8.8
DNS_QUATERNARY=9.9.9.9

# ==============================================================================
# PI-HOLE DHCP CONFIGURATION
# ==============================================================================

# Enable Pi-hole as DHCP server (true/false)
PIHOLE_DHCP_ENABLED=false

# DHCP Range Configuration
DHCP_RANGE_START=192.168.100.100
DHCP_RANGE_END=192.168.100.200
DHCP_LEASE_TIME=24

# Network Gateway
DHCP_ROUTER_IP=192.168.100.1

# ==============================================================================
# FILE SYNCHRONIZATION
# ==============================================================================

# Syncthing
SYNCTHING_PORT=8384
SYNCTHING_TRANSFER_PORT=22000
SYNCTHING_DISCOVERY_PORT=21027

# Additional drive mounts
DRIVE_1=/mnt/drive1
DRIVE_2=/mnt/drive2  
DRIVE_3=/mnt/drive3

# ==============================================================================
# MONITORING CONFIGURATION
# ==============================================================================

# Telegraf Configuration
TELEGRAF_INTERVAL=60s
TELEGRAF_HOSTNAME=homelab-server

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================

# Default passwords (change these in production)
DEFAULT_ADMIN_PASSWORD=Admin@123.
DEFAULT_USER_PASSWORD=User@123.

# SSL Configuration (for domain mode)
SSL_EMAIL=contact@example.com
SSL_COUNTRY=KE
SSL_STATE=Nairobi
SSL_LOCALITY=Nairobi
SSL_ORGANIZATION=Homelab

# ==============================================================================
# PERFORMANCE CONFIGURATION
# ==============================================================================

# Resource Limits (adjust based on your system)
CPU_LIMIT=2
MEMORY_LIMIT=4g
MEMORY_RESERVATION=1g

# Database Performance
POSTGRES_SHARED_BUFFERS=256MB
POSTGRES_EFFECTIVE_CACHE_SIZE=1GB
POSTGRES_WORK_MEM=64MB

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

LOG_LEVEL=INFO
LOG_RETENTION_DAYS=30
LOG_SIZE_LIMIT=10m

# ==============================================================================
# BACKUP AND RESTORE
# ==============================================================================

# Automatic Backups
BACKUP_ENABLED=true
BACKUP_SCHEDULE='0 2 * * *'  # 2 AM daily
BACKUP_RETENTION_DAYS=7

# Database Backups
POSTGRES_BACKUP_ENABLED=true
POSTGRES_BACKUP_SCHEDULE='0 3 * * *'

# Media Library Backups
MEDIA_BACKUP_ENABLED=true
MEDIA_BACKUP_SCHEDULE='0 4 * * 0'  # Weekly on Sunday

# ==============================================================================
# UPDATE CONFIGURATION
# ==============================================================================

# Auto-update settings
AUTO_UPDATE_ENABLED=false
UPDATE_CHECK_SCHEDULE='0 6 * * 0'  # Weekly on Sunday 6 AM

# Backup before update
BACKUP_BEFORE_UPDATE=true

# ==============================================================================
# NOTIFICATION CONFIGURATION
# ==============================================================================

# Email Notifications (optional)
SMTP_SERVER=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
NOTIFICATION_EMAIL=

# Telegram Notifications (optional)
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# ==============================================================================
# DEVELOPMENT CONFIGURATION
# ==============================================================================

# Development mode
DEV_MODE=false
DEBUG_ENABLED=false

# API Keys (for development)
WEATHER_API_KEY=
MAPS_API_KEY=

# ==============================================================================
# EXTERNAL SERVICES (Optional - Domain Mode Only)
# ==============================================================================

# Cloudflare DNS (for domain mode)
CLOUDFLARE_EMAIL=your-email@example.com
CLOUDFLARE_API_KEY=your-cloudflare-api-key

# Backup Storage
RCLONE_REMOTE=your-remote-name
CLOUD_BACKUP_PROVIDER=
CLOUD_BACKUP_BUCKET=

# ==============================================================================
# SERVICE ENABLE/DISABLE FLAGS
# ==============================================================================

# Enable/Disable specific services
ENABLE_GRAFANA=true
ENABLE_TIMESCALEDB=false
ENABLE_ZIGBEE2MQTT=false
ENABLE_JUPYTER=false
ENABLE_CODE_SERVER=false
ENABLE_OUTLINE=false
ENABLE_MLFLOW=true
ENABLE_OPENCV=false

# ==============================================================================
# HARDWARE-SPECIFIC CONFIGURATION
# ==============================================================================

# Zigbee adapter (uncomment and set if using Zigbee2MQTT)
# ZIGBEE_ADAPTER=/dev/ttyUSB0

# USB devices
# USB_DEVICE_1=/dev/ttyUSB0
# USB_DEVICE_2=/dev/ttyACM0

# ==============================================================================
# ADVANCED NETWORKING
# ==============================================================================

# Custom network configurations
DOCKER_SUBNET=172.20.0.0/16
DOCKER_GATEWAY=172.20.0.1

# Port forwarding (for external access)
EXTERNAL_ACCESS_ENABLED=false
EXTERNAL_DOMAIN=yourdomain.com

# ==============================================================================
# HEALTH CHECK CONFIGURATION
# ==============================================================================

# Health check intervals
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# ==============================================================================
# SERVICE SPECIFIC CONFIGURATION
# ==============================================================================

# Home Assistant
HOMEASSISTANT_TIMEZONE=Africa/Nairobi
HOMEASSISTANT_CURRENCY=KES
HOMEASSISTANT_COUNTRY=KE

# Node-RED
NODE_RED_ENABLE_PROJECTS=true
NODE_RED_ENABLE_SAFE_MODE=false

# Mosquitto
MOSQUITTO_USERNAME=mqtt_user
MOSQUITTO_PASSWORD=changeme123_mqtt

# MeiliSearch (KaraKeep)
MEILI_ENV=production
MEILI_HTTP_ADDR=0.0.0.0:7700

# ==============================================================================
# MAINTENANCE CONFIGURATION
# ==============================================================================

# Log rotation
LOG_ROTATION_SIZE=10M
LOG_ROTATION_KEEP=10

# Cleanup schedules
CLEANUP_SCHEDULE='0 5 * * *'  # Daily at 5 AM
TEMP_FILE_RETENTION_DAYS=7

# ==============================================================================
# SECURITY HEADERS (Traefik)
# ==============================================================================

# Security headers for web services
ENABLE_SECURITY_HEADERS=true
ENABLE_HSTS=true
ENABLE_CSP=true

# ==============================================================================
# RATE LIMITING
# ==============================================================================

# Rate limiting for public services
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=1m

# ==============================================================================
# END OF CONFIGURATION
# ==============================================================================
